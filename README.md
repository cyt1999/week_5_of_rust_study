# week_5_of_rust_study


**声明宏的基本结构如下：**

```rust
macro_rules! macro_name {
    (pattern) => (expansion);
    // ... 可以有多个模式和展开
}
```

macro_name: 宏的名称。

pattern: 匹配的模式，可以包含多种形式的输入。

expansion: 当模式匹配时，宏将要展开成的代码。

<br>


**一个简单的声明宏**

这个宏接受一个表达式并将其作为消息打印出来：

```rust
macro_rules! say_hello {
    ($msg:expr) => {
        println!("Hello, {}", $msg);
    };
}

fn main() {
    say_hello!("world");
}

```

输出

Hello, world

<br>

**宏的编译过程**

宏的编译过程分为两个阶段：

1、宏展开：在编译代码之前，编译器首先对所有的宏进行展开。这意味着它会将宏调用替换为宏定义中指定的代码。这个过程是在编译的早期阶段完成的，因此宏可以用来生成可以在之后的编译阶段使用的代码（如函数、结构体等）。

2、编译展开后的代码：一旦所有宏被展开，编译器就会继续正常的编译过程，编译这些展开后的代码，就像它们是直接写在源文件中一样。

